[gd_scene load_steps=3 format=2]

[ext_resource path="res://icon.png" type="Texture" id=1]

[sub_resource type="GDScript" id=1]
script/source = "extends PanelContainer

export(String) var itemName=\"Name\"
export(int) var itemPrice=\"100\"
export(String) var itemDescription=\"Lorem ipsum\"
export(bool) var unique=false

const tweenParameters={
	\"duration\":0.3,
	\"rect_scale_max\":1.1*Vector2(1,1),
	\"type\":Tween.TRANS_QUINT,
	\"easing\":Tween.EASE_OUT
}

func _ready():
	$hboxItem/label.text=self.itemName
	$hboxItem/btn.text=String(self.itemPrice)
	self.rect_pivot_offset=self.rect_size/2
	connect(\"mouse_entered\",self,\"updateDescription\")
	connect(\"mouse_entered\",self,\"twnGrow\")
	connect(\"mouse_exited\",self,\"twnShrink\")
	$hboxItem/btn.connect(\"pressed\",self,\"buy\")
	
func updateDescription():
	global.shopDescription.text=self.itemDescription

func buy():
	if global.player.gold>self.itemPrice:
		global.player.gold-=self.itemPrice
		#Effect here
		
		if self.unique:self.queue_free()
	
func twnGrow():
	$twnScale.interpolate_property(self,\"rect_scale\",self.rect_scale,self.tweenParameters.rect_scale_max,self.tweenParameters.duration,self.tweenParameters.type,self.tweenParameters.easing)
	$twnScale.start()

func twnShrink():
	$twnScale.interpolate_property(self,\"rect_scale\",self.rect_scale,Vector2(1,1),self.tweenParameters.duration,self.tweenParameters.type,self.tweenParameters.easing)
	$twnScale.start()
	
	"

[node name="itemModel" type="PanelContainer"]
margin_right = 326.0
margin_bottom = 78.0
script = SubResource( 1 )

[node name="twnScale" type="Tween" parent="."]

[node name="hboxItem" type="HBoxContainer" parent="."]
margin_left = 7.0
margin_top = 7.0
margin_right = 319.0
margin_bottom = 71.0

[node name="textureRect" type="TextureRect" parent="hboxItem"]
margin_right = 64.0
margin_bottom = 64.0
texture = ExtResource( 1 )

[node name="label" type="Label" parent="hboxItem"]
margin_left = 68.0
margin_top = 25.0
margin_right = 236.0
margin_bottom = 39.0
size_flags_horizontal = 3
size_flags_stretch_ratio = 7.0
text = "GODOTINHO"
align = 1
valign = 1

[node name="btn" type="Button" parent="hboxItem"]
margin_left = 240.0
margin_right = 312.0
margin_bottom = 64.0
size_flags_horizontal = 3
size_flags_stretch_ratio = 3.0
text = "50"
